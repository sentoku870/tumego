# 10 – ブランチ運用ポリシー

## 1. 主要ブランチの役割

- `main`
  - 開発の中心となるブランチ
  - 通常の機能開発は feature ブランチから PR を通して main にマージする
  - テストが通っている「準安定」状態を保つことを目標とする

- `stable-20251116`
  - **最新安定版を指すブランチ**
  - GitHub Pages の公開元ブランチ
  - 利用者がアクセスする「公開用バージョン」は常にこのブランチから配信される
  - 通常の開発では直接コミットせず、リリース時に main から `reset --hard` で同期させる

- `feature/*`
  - 開発者が機能追加や改善のために切る作業用ブランチ
  - 完了後は PR を通じて main にマージする
  - 例: `feature/ver3-hint-mode`

- `codex/*`
  - Codex / AI に大きめの変更を任せる場合の専用ブランチ
  - 例: `codex/add-responsive-layout-for-device-profiles`
  - 人間側がレビューして問題なければ main にマージする

## 2. ブランチ運用ルール

1. **開発作業の基本ルール**
   - 直接 `main` 上で大きな変更を行わない
   - 必ず `feature/*` または `codex/*` ブランチを切って作業する

2. **stable ブランチの扱い**
   - `stable-20251116` には **リリース済みの安定版のみ** を置く
   - 通常時は「読み取り専用」と考える（手動コミット禁止）
   - 新バージョンのリリース時にのみ、main から同期する（詳細は `11-release-flow.md` を参照）

3. **タグ付け（任意）**
   - 必要であれば、リリース時に `v3.0.0` のようなタグを `stable-20251116` に付与する
   - タグ運用は今後の必要性に応じて整備する

4. **Pages 設定**
   - GitHub Pages の公開元は `stable-20251116 / (root)` とする
   - main からの公開は行わず、「公開は必ず stable 経由」とする
